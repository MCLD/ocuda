@model Ocuda.Ops.Controllers.Areas.Services.ViewModels.EmployeeCard.IndexViewModel

<div class="row">
	<div class="col-12 col-md-6 mb-2">
		<h1>Employee Card Requests</h1>
	</div>
</div>

<div class="row mb-2">
	<div class="col-12">
		<div class="d-inline-block">
			<ul class="nav nav-pills">
				<li class="nav-item">
					<a asp-action="@nameof(EmployeeCardController.Index)"
					   asp-route-Processed=""
					   class="nav-link"
					   ActiveBy routeKey="processed" value=",false">
						Pending
					</a>
				</li>
				<li class="nav-item">
					<a asp-action="@nameof(EmployeeCardController.Index)"
					   asp-route-Processed="true"
					   class="nav-link"
					   ActiveBy routeKey="processed"
					   value="@true">
						Processed
					</a>
				</li>
			</ul>
		</div>
	</div>
</div>

<table class="table table-sm table-bordered link-table">
	<thead>
		<tr>
			<th>@(Model.IsProcessed ? "Processed" : "Submitted")</th>
			<th>Name</th>
			<th>Email</th>
			<th>Department</th>
		</tr>
	</thead>
	<tbody>
		@if (Model.ItemCount == 0)
		{
			<tr>
				<td colspan="4">
					No requests found.
				</td>
			</tr>
		}
		else
		{
			@foreach (var request in Model.CardRequests)
			{
				<tr>
					<td>
						<a asp-action="@(nameof(EmployeeCardController.Details))"
						   asp-route-id="@request.Id">
							@(Model.IsProcessed? request.ProcessedAt: request.SubmittedAt)
						</a>
					</td>
					<td>@request.FirstName @request.LastName</td>
					<td>@request.Email</td>
					<td>@request.Department</td>
				</tr>
			}
		}
	</tbody>
</table>

<nav paginate="@Model"></nav>